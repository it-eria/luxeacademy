jQuery,$(function(){var s=$(".nacc li.active > div > .comment-parent").length,e=3;$(".nacc li.active > div > .comment-parent:lt("+e+")").show(),$("#loadMore").click(function(){e=e+5<=s?e+5:s,$(".nacc li.active > div > .comment-parent:lt("+e+")").show()}),$(document).on("click",".naccs .menu div",function(){var s=$(this).index();if(!$(this).is("active")){$(".naccs .menu div").removeClass("active"),$(".naccs ul li").removeClass("active"),$(this).addClass("active"),$(".naccs ul").find("li:eq("+s+")").addClass("active");var e=$(".naccs ul").find("li:eq("+s+")").innerHeight();$(".naccs ul").height(e+"px")}var i=$(".nacc li.active > div > .comment-parent").length,a=3;$(".nacc li.active > div > .comment-parent:lt("+a+")").show(),$("#loadMore").click(function(){a=a+5<=i?a+5:i,$(".nacc li.active > div > .comment-parent:lt("+a+")").show()})}),$(window).width()<992&&$(document).on("click",".naccs .menu div",function(){$("html, body").animate({scrollTop:$($(this).attr("data-scroll")).offset().top},500,"linear")}),$(window).on("resize",function(){992<$(window).width()&&($(".bl-post:first-child").removeClass("col-lg-4").addClass("col-8"),$(".bl-post:first-child").css({height:2*$(".bl-post:last-child").height()+24+"px"}))}),992<$(window).width()&&($(".bl-post:first-child").removeClass("col-lg-4").addClass("col-8"),$(".bl-post:first-child").css({height:2*$(".bl-post:last-child").height()+24+"px"})),$("#procent-progress").prepend($(".progress-main").attr("value")),$(".mask").css({height:$(".program-item").height()-$(".h2-program-title").height()+"px"}),$(".fall-effect").mouseenter(function(){$(this).find(".mask").css({top:$(".h2-program-title").height()+"px"})}).mouseleave(function(){$(this).find(".mask").css({top:"0"})}),$(".nav_wrapper").css({"margin-top":$(".header-info-line").height()+20+"px"}),$(window).on("resize",function(){$(".nav_wrapper").css({"margin-top":$(".header-info-line").height()+20+"px"})}),$("#fix-menu-padding").css({"padding-bottom":2*$(".nav_wrapper").height()+$(".header-info-line").height()-10+"px"}),$(window).width()<768&&$("#fix-menu-padding").css({"padding-bottom":2*$(".nav_wrapper").height()+"px"}),$("ul li:has(ul)").addClass("has-submenu"),$("ul li ul").addClass("sub-menu"),$("ul.dropdown li").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")});var i=$("#menu"),a=$("#spinner-form"),c=$("#search"),o=$(".search_box"),n=$(".has-submenu > a");a.click(function(s){a.toggleClass("active"),i.toggleClass("active"),c.hasClass("active")&&$(".menu.active").css("padding-top","50px")}),c.click(function(s){s.preventDefault(),o.toggleClass("active")}),n.click(function(s){s.preventDefault(),$(this).toggleClass("active").next("ul").toggleClass("active")}),$("ul li:has(ul)"),$(function(){var e=$(document).scrollTop(),i=$(".nav_wrapper").outerHeight();$(window).scroll(function(){var s=$(document).scrollTop();$(document).scrollTop(),$(".nav_wrapper").css("position","fixed"),i<s?$(".nav_wrapper").addClass("scroll"):$(".nav_wrapper").removeClass("scroll"),e<s?$(".nav_wrapper").removeClass("no-scroll"):$(".nav_wrapper").addClass("no-scroll"),e=$(document).scrollTop()})}),$(".slider-wrap").slick({dots:!1,infinite:!0,speed:700,fade:!0,arrows:!0,autoplay:!0,nextArrow:'<img class="slick-next slick-arrow" src="assets/img/right-arrow.png" />',prevArrow:'<img class="slick-prev slick-arrow" src="assets/img/left-arrow.png" />',cssEase:"linear",responsive:[{breakpoint:768,settings:{arrows:!1}}]});var t={dots:!1,arrows:!1,autoplay:!1,infinite:!0,speed:1e3,slidesToShow:1,centerMode:!0,focusOnSelect:!0};$(window).width()<992?$(".all-posts-container").hasClass("slick-slider")||$(".all-posts-container").slick(t):$(".all-posts-container").hasClass("slick-slider")&&$(".all-posts-container").slick("unslick"),$(window).width()<992?$(".courses-wrapper").hasClass("slick-slider")||$(".courses-wrapper").slick(t):$(".courses-wrapper").hasClass("slick-slider")&&$(".courses-wrapper").slick("unslick"),$(window).width()<992?$(".all-posts-container").hasClass("slick-slider")||$(".all-posts-container").slick(t):$(".all-posts-container").hasClass("slick-slider")&&$(".all-posts-container").slick("unslick"),$(".courses-wrapper").hasClass("unclick-slider-event")&&$(".courses-wrapper").hasClass("slick-slider")&&$(".courses-wrapper").slick("unslick"),$(window).width()<992?$(".programs-wrapper").hasClass("slick-slider")||$(".programs-wrapper").slick(t):$(".programs-wrapper").hasClass("slick-slider")&&$(".programs-wrapper").slick("unslick"),$(window).width()<992?$(".recent-slider-mob").hasClass("slick-slider")||$(".recent-slider-mob").slick(t):$(".recent-slider-mob").hasClass("slick-slider")&&$(".recent-slider-mob").slick("unslick");var l,r,d=(jQuery,l=$(".js-accordion").find(".js-accordion-header"),$(".js-accordion-item"),r={speed:400,oneOpen:!1},{init:function(s){l.on("click",function(){d.toggle($(this))}),$.extend(r,s),r.oneOpen&&1<$(".js-accordion-item.active").length&&$(".js-accordion-item.active:not(:first)").removeClass("active"),$(".js-accordion-item.active").find("> .js-accordion-body").show()},toggle:function(s){r.oneOpen&&s[0]!=s.closest(".js-accordion").find("> .js-accordion-item.active > .js-accordion-header")[0]&&s.closest(".js-accordion").find("> .js-accordion-item").removeClass("active").find(".js-accordion-body").slideUp(),s.closest(".js-accordion-item").toggleClass("active"),s.next().stop().slideToggle(r.speed)}});$(document).ready(function(){d.init({speed:300,oneOpen:!0})});var p=$("#myModal"),h=$(".imgZoom"),u=$("#img01"),m=$("#caption");$(h).on("click",function(){p.fadeIn(300),m.text($(this).attr("alt")),u.attr("src",$(this).attr("src"))});var v=$("span.close");$(v).on("click",function(){p.fadeOut(300)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJqUXVlcnkiLCIkIiwic2l6ZV9saSIsImxlbmd0aCIsIngiLCJzaG93IiwiY2xpY2siLCJkb2N1bWVudCIsIm9uIiwibnVtYmVySW5kZXgiLCJ0aGlzIiwiaW5kZXgiLCJpcyIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJmaW5kIiwibGlzdEl0ZW1IZWlnaHQiLCJpbm5lckhlaWdodCIsImhlaWdodCIsIndpbmRvdyIsIndpZHRoIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsImF0dHIiLCJvZmZzZXQiLCJ0b3AiLCJjc3MiLCJwcmVwZW5kIiwibW91c2VlbnRlciIsIm1vdXNlbGVhdmUiLCJtYXJnaW4tdG9wIiwicGFkZGluZy1ib3R0b20iLCJob3ZlciIsIiRtZW51IiwiJG1lbnVsaW5rIiwiJHNlYXJjaCIsIiRzZWFyY2hfYm94IiwiJG1lbnVUcmlnZ2VyIiwiZSIsInRvZ2dsZUNsYXNzIiwiaGFzQ2xhc3MiLCJwcmV2ZW50RGVmYXVsdCIsIm5leHQiLCJ0Iiwib3V0ZXJIZWlnaHQiLCJzY3JvbGwiLCJuIiwic2xpY2siLCJkb3RzIiwiaW5maW5pdGUiLCJzcGVlZCIsImZhZGUiLCJhcnJvd3MiLCJhdXRvcGxheSIsIm5leHRBcnJvdyIsInByZXZBcnJvdyIsImNzc0Vhc2UiLCJyZXNwb25zaXZlIiwiYnJlYWtwb2ludCIsInNldHRpbmdzIiwic2xpY2tQYXJhbWV0ZXJzIiwic2xpZGVzVG9TaG93IiwiY2VudGVyTW9kZSIsImZvY3VzT25TZWxlY3QiLCIkYWNjb3JkaW9uX2hlYWRlciIsImFjY29yZGlvbiIsIm9uZU9wZW4iLCJpbml0IiwiJHNldHRpbmdzIiwidG9nZ2xlIiwiZXh0ZW5kIiwiJHRoaXMiLCJjbG9zZXN0Iiwic2xpZGVVcCIsInN0b3AiLCJzbGlkZVRvZ2dsZSIsInJlYWR5IiwibW9kYWwiLCJpbWciLCJtb2RhbEltZyIsImNhcHRpb25UZXh0IiwiZmFkZUluIiwidGV4dCIsInNwYW4iLCJmYWRl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RSxFQUFNTyxRQUFRIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xyXG4gICAgJChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNpemVfbGkgPSAkKFwiLm5hY2MgbGkuYWN0aXZlID4gZGl2ID4gLmNvbW1lbnQtcGFyZW50XCIpLmxlbmd0aDtcclxuICAgICAgICB2YXIgeCA9IDM7XHJcbiAgICAgICAgJCgnLm5hY2MgbGkuYWN0aXZlID4gZGl2ID4gLmNvbW1lbnQtcGFyZW50Omx0KCcgKyB4ICsgJyknKS5zaG93KCk7XHJcbiAgICAgICAgJCgnI2xvYWRNb3JlJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB4ID0gKHggKyA1IDw9IHNpemVfbGkpID8geCArIDUgOiBzaXplX2xpO1xyXG4gICAgICAgICAgICAkKCcubmFjYyBsaS5hY3RpdmUgPiBkaXYgPiAuY29tbWVudC1wYXJlbnQ6bHQoJyArIHggKyAnKScpLnNob3coKTtcclxuICAgICAgICAgICAgaWYgKHggPT0gc2l6ZV9saSkge1xyXG4gICAgICAgICAgICAgICAgLy8gICQoJyNsb2FkTW9yZScpLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKGRvY3VtZW50KS5vbihcImNsaWNrXCIsIFwiLm5hY2NzIC5tZW51IGRpdlwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBudW1iZXJJbmRleCA9ICQodGhpcykuaW5kZXgoKTtcclxuICAgICAgICAgICAgaWYgKCEkKHRoaXMpLmlzKFwiYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiLm5hY2NzIC5tZW51IGRpdlwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICQoXCIubmFjY3MgdWwgbGlcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICQoXCIubmFjY3MgdWxcIikuZmluZChcImxpOmVxKFwiICsgbnVtYmVySW5kZXggKyBcIilcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGxpc3RJdGVtSGVpZ2h0ID0gJChcIi5uYWNjcyB1bFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKFwibGk6ZXEoXCIgKyBudW1iZXJJbmRleCArIFwiKVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5pbm5lckhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgJChcIi5uYWNjcyB1bFwiKS5oZWlnaHQobGlzdEl0ZW1IZWlnaHQgKyBcInB4XCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgc2l6ZV9saSA9ICQoXCIubmFjYyBsaS5hY3RpdmUgPiBkaXYgPiAuY29tbWVudC1wYXJlbnRcIikubGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgeCA9IDM7XHJcbiAgICAgICAgICAgICQoJy5uYWNjIGxpLmFjdGl2ZSA+IGRpdiA+IC5jb21tZW50LXBhcmVudDpsdCgnICsgeCArICcpJykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcjbG9hZE1vcmUnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB4ID0gKHggKyA1IDw9IHNpemVfbGkpID8geCArIDUgOiBzaXplX2xpO1xyXG4gICAgICAgICAgICAgICAgJCgnLm5hY2MgbGkuYWN0aXZlID4gZGl2ID4gLmNvbW1lbnQtcGFyZW50Omx0KCcgKyB4ICsgJyknKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoeCA9PSBzaXplX2xpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICQoJyNsb2FkTW9yZScpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA5OTIpIHtcclxuICAgICAgICAgICAgJChkb2N1bWVudCkub24oXCJjbGlja1wiLCBcIi5uYWNjcyAubWVudSBkaXZcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoeyBzY3JvbGxUb3A6ICQoJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcpKS5vZmZzZXQoKS50b3AgfSwgNTAwLCAnbGluZWFyJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gOTkyKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuYmwtcG9zdDpmaXJzdC1jaGlsZCcpLnJlbW92ZUNsYXNzKCdjb2wtbGctNCcpLmFkZENsYXNzKCdjb2wtOCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmJsLXBvc3Q6Zmlyc3QtY2hpbGQnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIFwiaGVpZ2h0XCI6ICgkKCcuYmwtcG9zdDpsYXN0LWNoaWxkJykuaGVpZ2h0KCkpICogMiArIDI0ICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gOTkyKSB7XHJcbiAgICAgICAgICAgICQoJy5ibC1wb3N0OmZpcnN0LWNoaWxkJykucmVtb3ZlQ2xhc3MoJ2NvbC1sZy00JykuYWRkQ2xhc3MoJ2NvbC04Jyk7XHJcbiAgICAgICAgICAgICQoJy5ibC1wb3N0OmZpcnN0LWNoaWxkJykuY3NzKHtcclxuICAgICAgICAgICAgICAgIFwiaGVpZ2h0XCI6ICgkKCcuYmwtcG9zdDpsYXN0LWNoaWxkJykuaGVpZ2h0KCkpICogMiArIDI0ICsgJ3B4J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQoJyNwcm9jZW50LXByb2dyZXNzJykucHJlcGVuZCgkKCcucHJvZ3Jlc3MtbWFpbicpLmF0dHIoJ3ZhbHVlJykpO1xyXG4gICAgICAgICQoJy5tYXNrJykuY3NzKHtcclxuICAgICAgICAgICAgXCJoZWlnaHRcIjogJCgnLnByb2dyYW0taXRlbScpLmhlaWdodCgpIC0gJCgnLmgyLXByb2dyYW0tdGl0bGUnKS5oZWlnaHQoKSArICdweCdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCgnLmZhbGwtZWZmZWN0JykubW91c2VlbnRlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuZmluZCgnLm1hc2snKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgXCJ0b3BcIjogJCgnLmgyLXByb2dyYW0tdGl0bGUnKS5oZWlnaHQoKSArICdweCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSkubW91c2VsZWF2ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuZmluZCgnLm1hc2snKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgXCJ0b3BcIjogXCIwXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJy5uYXZfd3JhcHBlcicpLmNzcyh7XHJcbiAgICAgICAgICAgICdtYXJnaW4tdG9wJzogJCgnLmhlYWRlci1pbmZvLWxpbmUnKS5oZWlnaHQoKSArIDIwICsgJ3B4J1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCgnLm5hdl93cmFwcGVyJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICdtYXJnaW4tdG9wJzogJCgnLmhlYWRlci1pbmZvLWxpbmUnKS5oZWlnaHQoKSArIDIwICsgJ3B4J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCgnI2ZpeC1tZW51LXBhZGRpbmcnKS5jc3Moe1xyXG4gICAgICAgICAgICBcInBhZGRpbmctYm90dG9tXCI6ICgkKCcubmF2X3dyYXBwZXInKS5oZWlnaHQoKSAqIDIpICsgJCgnLmhlYWRlci1pbmZvLWxpbmUnKS5oZWlnaHQoKSAtIDEwICsgJ3B4J1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA3NjgpIHtcclxuICAgICAgICAgICAgJCgnI2ZpeC1tZW51LXBhZGRpbmcnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgXCJwYWRkaW5nLWJvdHRvbVwiOiAkKCcubmF2X3dyYXBwZXInKS5oZWlnaHQoKSAqIDIgKyAncHgnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJChcInVsIGxpOmhhcyh1bClcIikuYWRkQ2xhc3MoXCJoYXMtc3VibWVudVwiKTtcclxuICAgICAgICAkKFwidWwgbGkgdWxcIikuYWRkQ2xhc3MoXCJzdWItbWVudVwiKTtcclxuICAgICAgICAkKFwidWwuZHJvcGRvd24gbGlcIikuaG92ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwiaG92ZXJcIilcclxuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoXCJob3ZlclwiKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciAkbWVudSA9ICQoXCIjbWVudVwiKSwgJG1lbnVsaW5rID0gJChcIiNzcGlubmVyLWZvcm1cIiksICRzZWFyY2ggPSAkKFwiI3NlYXJjaFwiKSwgJHNlYXJjaF9ib3ggPSAkKFwiLnNlYXJjaF9ib3hcIiksXHJcbiAgICAgICAgICAgICRtZW51VHJpZ2dlciA9ICQoXCIuaGFzLXN1Ym1lbnUgPiBhXCIpO1xyXG4gICAgICAgICRtZW51bGluay5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAkbWVudWxpbmsudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgICRtZW51LnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBpZiAoJHNlYXJjaC5oYXNDbGFzcyhcImFjdGl2ZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgJChcIi5tZW51LmFjdGl2ZVwiKS5jc3MoXCJwYWRkaW5nLXRvcFwiLCBcIjUwcHhcIilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRzZWFyY2guY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAkc2VhcmNoX2JveC50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRtZW51VHJpZ2dlci5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHZhciB0ID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgdC50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKS5uZXh0KFwidWxcIikudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIilcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKFwidWwgbGk6aGFzKHVsKVwiKTtcclxuICAgICAgICAkKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGUgPSAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKTtcclxuICAgICAgICAgICAgdmFyIHQgPSAkKFwiLm5hdl93cmFwcGVyXCIpLm91dGVySGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG4gPSAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKTtcclxuICAgICAgICAgICAgICAgIGlmICgkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSA+PSA1MCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIubmF2X3dyYXBwZXJcIikuY3NzKFwicG9zaXRpb25cIiwgXCJmaXhlZFwiKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKFwiLm5hdl93cmFwcGVyXCIpLmNzcyhcInBvc2l0aW9uXCIsIFwiZml4ZWRcIilcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChuID4gdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIubmF2X3dyYXBwZXJcIikuYWRkQ2xhc3MoXCJzY3JvbGxcIilcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIi5uYXZfd3JhcHBlclwiKS5yZW1vdmVDbGFzcyhcInNjcm9sbFwiKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG4gPiBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIi5uYXZfd3JhcHBlclwiKS5yZW1vdmVDbGFzcyhcIm5vLXNjcm9sbFwiKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKFwiLm5hdl93cmFwcGVyXCIpLmFkZENsYXNzKFwibm8tc2Nyb2xsXCIpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlID0gJChkb2N1bWVudCkuc2Nyb2xsVG9wKClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICAkKCcuc2xpZGVyLXdyYXAnKS5zbGljayh7XHJcbiAgICAgICAgICAgIGRvdHM6IGZhbHNlLFxyXG4gICAgICAgICAgICBpbmZpbml0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgc3BlZWQ6IDcwMCxcclxuICAgICAgICAgICAgZmFkZTogdHJ1ZSxcclxuICAgICAgICAgICAgYXJyb3dzOiB0cnVlLFxyXG4gICAgICAgICAgICBhdXRvcGxheTogdHJ1ZSxcclxuICAgICAgICAgICAgbmV4dEFycm93OiAnPGltZyBjbGFzcz1cInNsaWNrLW5leHQgc2xpY2stYXJyb3dcIiBzcmM9XCJhc3NldHMvaW1nL3JpZ2h0LWFycm93LnBuZ1wiIC8+JyxcclxuICAgICAgICAgICAgcHJldkFycm93OiAnPGltZyBjbGFzcz1cInNsaWNrLXByZXYgc2xpY2stYXJyb3dcIiBzcmM9XCJhc3NldHMvaW1nL2xlZnQtYXJyb3cucG5nXCIgLz4nLFxyXG4gICAgICAgICAgICBjc3NFYXNlOiAnbGluZWFyJyxcclxuICAgICAgICAgICAgcmVzcG9uc2l2ZTogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDc2OCxcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJvd3M6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBzbGlja1BhcmFtZXRlcnMgPSB7XHJcbiAgICAgICAgICAgIGRvdHM6IGZhbHNlLFxyXG4gICAgICAgICAgICBhcnJvd3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBhdXRvcGxheTogZmFsc2UsXHJcbiAgICAgICAgICAgIGluZmluaXRlOiB0cnVlLFxyXG4gICAgICAgICAgICBzcGVlZDogMTAwMCxcclxuICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxyXG4gICAgICAgICAgICBjZW50ZXJNb2RlOiB0cnVlLFxyXG4gICAgICAgICAgICBmb2N1c09uU2VsZWN0OiB0cnVlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy90YWIgMVxyXG4gICAgICAgIGZ1bmN0aW9uIHNsaWNrVW5zbGlja3RhYjEoKSB7XHJcbiAgICAgICAgICAgIHZhciB3aW5kb3dXaWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xyXG4gICAgICAgICAgICBpZiAod2luZG93V2lkdGggPCA5OTIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghJCgnLmFsbC1wb3N0cy1jb250YWluZXInKS5oYXNDbGFzcygnc2xpY2stc2xpZGVyJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYWxsLXBvc3RzLWNvbnRhaW5lcicpLnNsaWNrKHNsaWNrUGFyYW1ldGVycyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCgnLmFsbC1wb3N0cy1jb250YWluZXInKS5oYXNDbGFzcygnc2xpY2stc2xpZGVyJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYWxsLXBvc3RzLWNvbnRhaW5lcicpLnNsaWNrKCd1bnNsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc2xpY2tVbnNsaWNrdGFiMSgpO1xyXG4gICAgICAgIC8vZW5kIHRhYjFcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2xpY2tVbnNsaWNrQ2F0ZWdvcnkoKSB7XHJcbiAgICAgICAgICAgIHZhciB3aW5kb3dXaWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xyXG4gICAgICAgICAgICBpZiAod2luZG93V2lkdGggPCA5OTIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghJCgnLmNvdXJzZXMtd3JhcHBlcicpLmhhc0NsYXNzKCdzbGljay1zbGlkZXInKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jb3Vyc2VzLXdyYXBwZXInKS5zbGljayhzbGlja1BhcmFtZXRlcnMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy5jb3Vyc2VzLXdyYXBwZXInKS5oYXNDbGFzcygnc2xpY2stc2xpZGVyJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuY291cnNlcy13cmFwcGVyJykuc2xpY2soJ3Vuc2xpY2snKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzbGlja1Vuc2xpY2tDYXRlZ29yeSgpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzbGlja1Vuc2xpY2tCbG9nUG9zdHMoKSB7XHJcbiAgICAgICAgICAgIHZhciB3aW5kb3dXaWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xyXG4gICAgICAgICAgICBpZiAod2luZG93V2lkdGggPCA5OTIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghJCgnLmFsbC1wb3N0cy1jb250YWluZXInKS5oYXNDbGFzcygnc2xpY2stc2xpZGVyJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYWxsLXBvc3RzLWNvbnRhaW5lcicpLnNsaWNrKHNsaWNrUGFyYW1ldGVycyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCgnLmFsbC1wb3N0cy1jb250YWluZXInKS5oYXNDbGFzcygnc2xpY2stc2xpZGVyJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYWxsLXBvc3RzLWNvbnRhaW5lcicpLnNsaWNrKCd1bnNsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc2xpY2tVbnNsaWNrQmxvZ1Bvc3RzKCk7XHJcblxyXG4gICAgICAgIGlmICgkKCcuY291cnNlcy13cmFwcGVyJykuaGFzQ2xhc3MoJ3VuY2xpY2stc2xpZGVyLWV2ZW50JykpIHtcclxuICAgICAgICAgICAgaWYgKCQoJy5jb3Vyc2VzLXdyYXBwZXInKS5oYXNDbGFzcygnc2xpY2stc2xpZGVyJykpIHtcclxuICAgICAgICAgICAgICAgICQoJy5jb3Vyc2VzLXdyYXBwZXInKS5zbGljaygndW5zbGljaycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzbGlja1Vuc2xpY2tQcm9ncmFtcygpIHtcclxuICAgICAgICAgICAgdmFyIHdpbmRvd1dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XHJcbiAgICAgICAgICAgIGlmICh3aW5kb3dXaWR0aCA8IDk5Mikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkKCcucHJvZ3JhbXMtd3JhcHBlcicpLmhhc0NsYXNzKCdzbGljay1zbGlkZXInKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5wcm9ncmFtcy13cmFwcGVyJykuc2xpY2soc2xpY2tQYXJhbWV0ZXJzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKCcucHJvZ3JhbXMtd3JhcHBlcicpLmhhc0NsYXNzKCdzbGljay1zbGlkZXInKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5wcm9ncmFtcy13cmFwcGVyJykuc2xpY2soJ3Vuc2xpY2snKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzbGlja1Vuc2xpY2tQcm9ncmFtcygpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzbGlja1Vuc2xpY2tQb3N0cygpIHtcclxuICAgICAgICAgICAgdmFyIHdpbmRvd1dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XHJcbiAgICAgICAgICAgIGlmICh3aW5kb3dXaWR0aCA8IDk5Mikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkKCcucmVjZW50LXNsaWRlci1tb2InKS5oYXNDbGFzcygnc2xpY2stc2xpZGVyJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucmVjZW50LXNsaWRlci1tb2InKS5zbGljayhzbGlja1BhcmFtZXRlcnMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy5yZWNlbnQtc2xpZGVyLW1vYicpLmhhc0NsYXNzKCdzbGljay1zbGlkZXInKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5yZWNlbnQtc2xpZGVyLW1vYicpLnNsaWNrKCd1bnNsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc2xpY2tVbnNsaWNrUG9zdHMoKTtcclxuICAgICAgICB2YXIgYWNjb3JkaW9uID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyICRhY2NvcmRpb24gPSAkKCcuanMtYWNjb3JkaW9uJyk7XHJcbiAgICAgICAgICAgIHZhciAkYWNjb3JkaW9uX2hlYWRlciA9ICRhY2NvcmRpb24uZmluZCgnLmpzLWFjY29yZGlvbi1oZWFkZXInKTtcclxuICAgICAgICAgICAgdmFyICRhY2NvcmRpb25faXRlbSA9ICQoJy5qcy1hY2NvcmRpb24taXRlbScpO1xyXG4gICAgICAgICAgICB2YXIgc2V0dGluZ3MgPSB7XHJcbiAgICAgICAgICAgICAgICBzcGVlZDogNDAwLFxyXG4gICAgICAgICAgICAgICAgb25lT3BlbjogZmFsc2VcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbiAoJHNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGFjY29yZGlvbl9oZWFkZXIub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvcmRpb24udG9nZ2xlKCQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkLmV4dGVuZChzZXR0aW5ncywgJHNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Mub25lT3BlbiAmJiAkKCcuanMtYWNjb3JkaW9uLWl0ZW0uYWN0aXZlJykubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuanMtYWNjb3JkaW9uLWl0ZW0uYWN0aXZlOm5vdCg6Zmlyc3QpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmpzLWFjY29yZGlvbi1pdGVtLmFjdGl2ZScpLmZpbmQoJz4gLmpzLWFjY29yZGlvbi1ib2R5Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRvZ2dsZTogZnVuY3Rpb24gKCR0aGlzKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5vbmVPcGVuICYmICR0aGlzWzBdICE9ICR0aGlzLmNsb3Nlc3QoJy5qcy1hY2NvcmRpb24nKS5maW5kKCc+IC5qcy1hY2NvcmRpb24taXRlbS5hY3RpdmUgPiAuanMtYWNjb3JkaW9uLWhlYWRlcicpWzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmNsb3Nlc3QoJy5qcy1hY2NvcmRpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJz4gLmpzLWFjY29yZGlvbi1pdGVtJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCcuanMtYWNjb3JkaW9uLWJvZHknKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNsaWRlVXAoKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuY2xvc2VzdCgnLmpzLWFjY29yZGlvbi1pdGVtJykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLm5leHQoKS5zdG9wKCkuc2xpZGVUb2dnbGUoc2V0dGluZ3Muc3BlZWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkoalF1ZXJ5KTtcclxuXHJcbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBhY2NvcmRpb24uaW5pdCh7IHNwZWVkOiAzMDAsIG9uZU9wZW46IHRydWUgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBtb2RhbCA9ICQoJyNteU1vZGFsJyk7XHJcbiAgICAgICAgdmFyIGltZyA9ICQoJy5pbWdab29tJyk7XHJcbiAgICAgICAgdmFyIG1vZGFsSW1nID0gJChcIiNpbWcwMVwiKTtcclxuICAgICAgICB2YXIgY2FwdGlvblRleHQgPSAkKFwiI2NhcHRpb25cIik7XHJcblxyXG4gICAgICAgICQoaW1nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG1vZGFsLmZhZGVJbigzMDApO1xyXG4gICAgICAgICAgICBjYXB0aW9uVGV4dC50ZXh0KCQodGhpcykuYXR0cignYWx0JykpO1xyXG4gICAgICAgICAgICBtb2RhbEltZy5hdHRyKCdzcmMnLCAkKHRoaXMpLmF0dHIoJ3NyYycpKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBBcnJheS5mcm9tKGltZywgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAvLyAgICAgJChpdGVtKS5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vICAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICAvLyAgICAgICAgIG1vZGFsSW1nLnNyYyA9IHRoaXMuc3JjO1xyXG4gICAgICAgIC8vICAgICAgICAgY2FwdGlvblRleHQuaW5uZXJIVE1MID0gdGhpcy5hbHQ7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9KTtcclxuXHJcbiAgICAgICAgdmFyIHNwYW4gPSAkKFwic3Bhbi5jbG9zZVwiKTtcclxuXHJcbiAgICAgICAgJChzcGFuKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG1vZGFsLmZhZGVPdXQoMzAwKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBJbml0IEFPU1xyXG4gICAgfSk7XHJcblxyXG59KShqUXVlcnkpOyJdfQ==
